(self.webpackChunkmix_portal_angular=self.webpackChunkmix_portal_angular||[]).push([[6],{6006:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SiteInitModule:()=>J});var n=i(2636),r=i(2057),o=i(9192),a=i(3022),s=i(4751),l=i(5374),u=i(3342),c=i(9773),p=i(6161),m=i(4788);let d=(()=>{class t extends p.m1{constructor(t){super({data:[],errors:[],status:"Pending"}),this.sharedApi=t,this.culturesState$=this.select(t=>t),this.loadCulture=this.effect(t=>t.pipe((0,u.b)(()=>{this.patchState({status:"Loading",errors:[]})}),(0,c.zg)(()=>this.sharedApi.getCultures().pipe((0,u.b)({next:t=>this.patchState({data:t,status:"Success",errors:[]}),error:t=>this.patchState({status:"Error",errors:t})}))))),this.loadCulture()}}return t.\u0275fac=function(e){return new(e||t)(m.LFG(l.VG))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();var f=i(8994),g=i(9574),Z=i(5174),S=i(3489);function z(t,e){if(1&t&&m._UZ(0,"nz-option",14),2&t){const t=e.$implicit;m.Q6J("nzLabel",t.fullName)("nzValue",t)}}function b(t,e){if(1&t&&m._UZ(0,"nz-option",14),2&t){const t=e.$implicit;m.Q6J("nzLabel",t.label)("nzValue",t.value)}}function v(t,e){1&t&&(m.TgZ(0,"div",null,15),m.TgZ(2,"div",16),m.TgZ(3,"div",17),m.TgZ(4,"nz-form-item"),m.TgZ(5,"nz-form-label",5),m._uU(6,"Server Name or IP"),m.qZA(),m.TgZ(7,"nz-form-control",18),m._UZ(8,"input",19),m.qZA(),m.qZA(),m.qZA(),m.TgZ(9,"div",20),m.TgZ(10,"nz-form-item"),m.TgZ(11,"nz-form-label",5),m._uU(12,"Port"),m.qZA(),m.TgZ(13,"nz-form-control",21),m._UZ(14,"input",22),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(15,"nz-form-item"),m.TgZ(16,"nz-form-label",5),m._uU(17,"Database Name"),m.qZA(),m.TgZ(18,"nz-form-control",23),m._UZ(19,"input",24),m.qZA(),m.qZA(),m.TgZ(20,"div",16),m.TgZ(21,"div",25),m.TgZ(22,"nz-form-item"),m.TgZ(23,"nz-form-label",5),m._uU(24,"DB Username"),m.qZA(),m.TgZ(25,"nz-form-control",26),m._UZ(26,"input",27),m.qZA(),m.qZA(),m.qZA(),m.TgZ(27,"div",25),m.TgZ(28,"nz-form-item"),m.TgZ(29,"nz-form-label",5),m._uU(30,"Db Password"),m.qZA(),m.TgZ(31,"nz-form-control",28),m._UZ(32,"input",29),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(2),m.Q6J("nzJustify","space-between"),m.xp6(3),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("nzSpan",24),m.xp6(4),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("nzSpan",24),m.xp6(3),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("nzJustify","space-between"),m.xp6(3),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("nzSpan",24),m.xp6(4),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("nzSpan",24))}function h(t,e){1&t&&(m.TgZ(0,"div",null,30),m.TgZ(2,"nz-form-item"),m.TgZ(3,"nz-form-label",5),m._uU(4,"Connection String"),m.qZA(),m.TgZ(5,"nz-form-control",31),m._UZ(6,"textarea",32),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(3),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("nzSpan",24))}function x(t,e){if(1&t&&(m.TgZ(0,"div",2),m.TgZ(1,"div",3),m.TgZ(2,"div",4),m._uU(3," Site Configuration "),m.qZA(),m.TgZ(4,"nz-form-item"),m.TgZ(5,"nz-form-label",5),m._uU(6,"Your Site Name"),m.qZA(),m.TgZ(7,"nz-form-control",6),m._UZ(8,"input",7),m.qZA(),m.qZA(),m.TgZ(9,"nz-form-item"),m.TgZ(10,"nz-form-label",5),m._uU(11,"Your 1st Culture & Language"),m.qZA(),m.TgZ(12,"nz-form-control",8),m.TgZ(13,"nz-select",9),m.YNc(14,z,1,2,"nz-option",10),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(15,"div",11),m.TgZ(16,"div",4),m._uU(17," Database Configuration "),m.qZA(),m.TgZ(18,"nz-form-item"),m.TgZ(19,"nz-form-label",5),m._uU(20,"Server Type"),m.qZA(),m.TgZ(21,"nz-form-control",12),m.TgZ(22,"nz-select",13),m.YNc(23,b,1,2,"nz-option",10),m.qZA(),m.qZA(),m.qZA(),m.YNc(24,v,33,12,"div",0),m.YNc(25,h,7,2,"div",0),m.qZA(),m.qZA()),2&t){const t=m.oxw().ngIf,e=m.oxw();m.Q6J("formGroup",e.initSiteForm),m.xp6(5),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("nzSpan",24),m.xp6(3),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("ngForOf",t.data),m.xp6(5),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("nzSpan",24),m.xp6(2),m.Q6J("ngForOf",e.dbTypeSelectOptions),m.xp6(1),m.Q6J("ngIf",!e.isSQLLiteDb),m.xp6(1),m.Q6J("ngIf",e.isSQLLiteDb)}}function _(t,e){if(1&t&&(m.ynx(0),m.YNc(1,x,26,11,"div",1),m.BQk()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngIf",t.initSiteForm)}}let q=(()=>{class t{constructor(t,e,i,n){this.fb=t,this.siteFormStore=e,this.initApi=i,this.route=n,this.dbTypeSelectOptions=[{label:"Microsoft SQL Server",value:a.xo.MicrosoftSQLServer},{label:"MySQL Database",value:a.xo.MySQL},{label:"PostgreSQL Database",value:a.xo.PostgreSQL},{label:"SQLite Database",value:a.xo.SQLite}]}ngOnInit(){this.initSiteForm=this.fb.group({siteName:[null,s.kI.required],culture:[null,s.kI.required],serverProvider:[a.xo.MySQL,s.kI.required],sqliteDbConnectionString:["Data Source=MixContent\\mix-cms.db",(0,a.do)(()=>this.isSQLLiteDb,s.kI.required)],databaseName:[null,(0,a.do)(()=>!this.isSQLLiteDb,s.kI.required)],databasePort:[null,(0,a.do)(()=>!this.isSQLLiteDb,s.kI.required)],databaseUser:[null,(0,a.do)(()=>!this.isSQLLiteDb,s.kI.required)],databasePassword:[null,(0,a.do)(()=>!this.isSQLLiteDb,s.kI.required)],databaseServer:[null,(0,a.do)(()=>!this.isSQLLiteDb,s.kI.required)]}),this.siteFormStore.culturesState$.subscribe(t=>{t.data.length&&this.initSiteForm.controls.culture.patchValue(t.data[0])})}get isSQLLiteDb(){return!this.initSiteForm||this.initSiteForm.controls.serverProvider.value===a.xo.SQLite}submitSiteForm(){if(!a.hf.validateForm(this.initSiteForm))return;const t={siteName:this.initSiteForm.controls.siteName.value,culture:this.initSiteForm.controls.culture.value,databaseProvider:this.initSiteForm.controls.serverProvider.value};t.databaseProvider===a.xo.SQLite?t.sqliteDbConnectionString=this.initSiteForm.controls.sqliteDbConnectionString.value:(t.databaseName=this.initSiteForm.controls.databaseName.value,t.databaseServer=this.initSiteForm.controls.databaseServer.value,t.databaseUser=this.initSiteForm.controls.databaseUser.value,t.databasePassword=this.initSiteForm.controls.databasePassword.value,t.databasePort=this.initSiteForm.controls.databasePort.value),this.initApi.initSite(t,{shouldShowSpinner:!0}).subscribe(t=>{this.route.navigateByUrl("init/step2")})}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(s.qu),m.Y36(d),m.Y36(l.yn),m.Y36(n.F0))},t.\u0275cmp=m.Xpm({type:t,selectors:[["site-init-form"]],decls:2,vars:3,consts:[[4,"ngIf"],["nz-form","","class","site-init-form",3,"formGroup",4,"ngIf"],["nz-form","",1,"site-init-form",3,"formGroup"],[1,"site-init-form__site-info"],[1,"site-init-form__subtitle"],[3,"nzSpan"],["nzErrorTip","Please input your site name",3,"nzSpan"],["nz-input","","formControlName","siteName","placeholder","Your best site event - Mixcore CMS"],["nzErrorTip","Please select your culture",3,"nzSpan"],["placeholder","Your best site event - Mixcore CMS","formControlName","culture"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"site-init-form__database-info"],["nzErrorTip","Please choose your database type",3,"nzSpan"],["placeholder","Your best site event - Mixcore CMS","formControlName","serverProvider"],[3,"nzLabel","nzValue"],["SQLForm",""],["nz-row","",3,"nzJustify"],["nz-col","","nzMd","16"],["nzErrorTip","Please input your server name",3,"nzSpan"],["nz-input","","placeholder","Domain, IP or docker service IP","formControlName","databaseServer"],["nz-col","","nzMd","7"],["nzErrorTip","Please input server port",3,"nzSpan"],["nz-input","","placeholder","Domain, IP or docker service IP","formControlName","databasePort"],["nzErrorTip","Please input your database name",3,"nzSpan"],["nz-input","","placeholder","Mixcore","formControlName","databaseName"],["nz-col","","nzMd","11"],["nzErrorTip","Please input DB username",3,"nzSpan"],["nz-input","","placeholder","Domain, IP or docker service IP","formControlName","databaseUser"],["nzErrorTip","Please input DB password",3,"nzSpan"],["nz-input","","placeholder","Domain, IP or docker service IP","formControlName","databasePassword"],["SQLiteForm",""],["nzErrorTip","Please input connection string",3,"nzSpan"],["nz-input","","placeholder","Data Source=MixContent\\mix-cms.db","formControlName","sqliteDbConnectionString"]],template:function(t,e){1&t&&(m.YNc(0,_,2,1,"ng-container",0),m.ALo(1,"async")),2&t&&m.Q6J("ngIf",m.lcZ(1,1,e.siteFormStore.culturesState$))},directives:[r.O5,f.Lr,s.JL,s.sg,g.SK,f.Nx,g.t3,f.iK,f.Fd,Z.Zp,s.Fj,s.JJ,s.u,S.Vq,r.sg,S.Ip],pipes:[r.Ov],styles:[".site-init-form__database-info[_ngcontent-%COMP%]{margin-top:25px}.site-init-form__subtitle[_ngcontent-%COMP%]{color:#206bc4;font-size:.625rem;font-weight:700}"],changeDetection:0}),t})();var T=i(1312),A=i(9117);const Q=["siteForm"];let P=(()=>{class t{submitSite(){this.siteFormComp&&this.siteFormComp.submitSiteForm()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Xpm({type:t,selectors:[["site-init"]],viewQuery:function(t,e){if(1&t&&m.Gf(Q,5),2&t){let t;m.iGM(t=m.CRH())&&(e.siteFormComp=t.first)}},decls:16,vars:0,consts:[[1,"site-init","app-background"],[1,"site-init__logo"],["width","150","src","assets/icons/mixcore-logo-red-2.svg"],[1,"site-init__content","app-widget"],[1,"site-init__mix-info"],["width","150","src","assets/icons/mix-info.svg"],[1,"site-init__form"],["siteForm",""],[1,"site-init__action"],["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m._UZ(2,"img",2),m.qZA(),m.TgZ(3,"div",3),m.TgZ(4,"div",4),m._UZ(5,"img",5),m.TgZ(6,"h1"),m._uU(7,"Welcome to Mixcore"),m.qZA(),m.TgZ(8,"span"),m._uU(9,"Let start your dream together!"),m.qZA(),m.qZA(),m.TgZ(10,"div",6),m._UZ(11,"site-init-form",null,7),m.qZA(),m.TgZ(13,"div",8),m.TgZ(14,"button",9),m.NdJ("click",function(){return e.submitSite()}),m._uU(15," Submit "),m.qZA(),m.qZA(),m.qZA(),m.qZA())},directives:[q,o.ix,T.dQ,A.w],styles:[".site-init[_ngcontent-%COMP%]{width:100%;padding:25px 0 50px;display:flex;flex-direction:column;align-items:center}.site-init__logo[_ngcontent-%COMP%]{margin-bottom:25px}.site-init__content[_ngcontent-%COMP%]{width:500px}.site-init__action[_ngcontent-%COMP%]{width:100%;padding:20px;display:flex;justify-content:flex-end}.site-init__mix-info[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:center;align-items:center}.site-init__form[_ngcontent-%COMP%]{padding:20px}"],changeDetection:0}),t})(),L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:[l.VG,d],imports:[[r.ez,s.u5,s.UX,Z.o7,f.U5,S.LV]]}),t})();const C=[{path:"",component:P}];let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[r.ez,n.Bz.forChild(C),L,o.sL]]}),t})()}}]);